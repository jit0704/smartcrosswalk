<!DOCTYPE html>
<html lang="ko">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>help 팝업</title>
  <script type="text/javascript" src="/base/js/lib/jquery-3.5.1.min.js"></script>
  <script type="text/javascript" src="/base/js/lib/jquery-ui.min.js"></script>
  <script type="text/javascript" src="/base/js/lib/jquery.modal.min.js"></script>
  <script type="text/javascript" src="/base/js/lib/swiper.js"></script>
  <script type="text/javascript" src="/base/js/common/includeHTML.js"></script> <!-- 퍼블리싱 확인용 include -->
  <script type="text/javascript" src="/base/js/common/ui.js"></script>
  <link rel="stylesheet" type="text/css" href="/base/css/jquery-ui.min.css" />
  <link rel="stylesheet" type="text/css" href="/base/css/swiper.css" />
  <link rel="stylesheet" type="text/css" href="/base/css/style.css" />
</head>
<body>
  <div id="ex" class="modal">
    <div class="modal-primary help">
      <div class="modal-header">
        <span class="tit">HELP</span>
      </div>
      <div class="modal-content">
        <div class="help-pop-content">
          <div class="help-tab-nav">
            <a href="#tab1">VMS</a>
            <a href="#tab2">음성안내장치</a>
            <a href="#tab3">집중조명</a>
            <a href="#tab4">바닥유도등</a>
          </div>
          <!-- //help-tab-nav -->
          <div class="help-tab-container">
            <div id="tab1" class="help-tab-content active">
              <div class="swiper-container">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                    내용1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                  <div class="swiper-slide">
                    내용1-2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                  <div class="swiper-slide">
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                  <div class="swiper-slide">
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용1-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                </div>
                <!-- //swiper-wrapper -->
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-pagination"></div>
              </div>
              <!-- //swiper-container -->
            </div>
            <!-- //help-tab-content -->

            <div id="tab2" class="help-tab-content">
              <div class="swiper-container">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                    내용2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                  <div class="swiper-slide">
                    내용2-2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용2-2<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                  <div class="swiper-slide">
                    내용2-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용2-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용2-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용2-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용2-3<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                </div>
                <!-- //swiper-wrapper -->
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-pagination"></div>
              </div>
              <!-- //swiper-container -->
            </div>
            <!-- //help-tab-content -->

            <div id="tab3" class="help-tab-content">
              <div class="swiper-container">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                    내용3-1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용3-1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용3-1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용3-1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용3-1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                </div>
                <!-- //swiper-wrapper -->
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-pagination"></div>
              </div>
              <!-- //swiper-container -->
            </div>
            <!-- //help-tab-content -->

            <div id="tab4" class="help-tab-content">
              <div class="swiper-container">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                    내용4-1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                    내용4-1<br>내용<br>내용<br>내용<br>내용<br>내용<br>내용<br>
                  </div>
                </div>
                <!-- //swiper-wrapper -->
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-pagination"></div>
              </div>
              <!-- //swiper-container -->
            </div>
            <!-- //help-tab-content -->
          </div>
          <!-- //help-tab-container -->
        </div>
        <!-- //help-pop-content -->
      </div>
      <!-- //modal-content -->
    </div>
    <!-- //management -->
  </div>
  <!-- //modal -->

  <a href="#ex" class="btn-modal-open hidden">퍼블리싱 확인용 버튼</a>

  <script>
    $(function(){
      $('.btn-modal-open').trigger('click'); // 퍼블리싱 확인용

      // tab 클릭 이벤트
      var $modal = $('.modal');
      var $tabNav = $('.help-tab-nav a');
      var $tabCon = $('.help-tab-content');

      $(document).on('click', '.help-tab-nav a', function(e){
        e.preventDefault();
        var $this = $(this);
        var hash = $this.attr('href');
        var itemSizeSum = 0;
        $tabNav.add($tabCon).removeClass('active');
        $this.add($(hash)).addClass('active');

        // tab버튼 클릭시 좌우 버튼 위치(X-axis좌표)가 페이지네이션 개수에 따라서 계산됨.
        setTimeout(function(){
          $(hash).find('.swiper-pagination .swiper-pagination-bullet').each(function(idx, item){
            itemSizeSum += $(item).width() + 10;
            $('.swiper-button-prev').css({
              'left': 'calc(50% - '+ itemSizeSum +'px)'
            });
            $('.swiper-button-next').css({
              'left': 'auto',
              'right': 'calc(50% - '+ itemSizeSum +'px)'
            });
          });

          if ($(hash).find('.swiper-pagination .swiper-pagination-bullet').length < 2) {
            $('.swiper-button-prev').add($('.swiper-button-next')).fadeOut(150);
          } else {
            $('.swiper-button-prev').add($('.swiper-button-next')).fadeIn(150);
          }
        }, 100);
      });
      $tabNav.eq(0).trigger('click');

      // tab swiper
      var swiper = new Swiper('.help-tab-content .swiper-container', {
        observeParents: true,
        observeSlideChildren: true,
        observer: true,
        allowTouchMove: false,
        preventClicks: false,
        preventClicksPropagation: false,
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev'
        },
        pagination: {
          el: '.swiper-pagination'
        }
      });

      // 팝업 활성화시 swiper 좌우 버튼(Y-axis좌표) 및 페이지네이션 위치 계산
      function positionCalc (el) {
        var $modalOffsetTop = el.offset().top;
        var $modalHeight = el.find('.modal-content').height();
        var $modalCon = $('.help-tab-content');
        var $pagination = $('.swiper-pagination', $modalCon);
        var $prevBtn = $('.swiper-button-prev', $modalCon);
        var $nextBtn = $('.swiper-button-next', $modalCon);
        $pagination.css('top', ($modalOffsetTop + $modalHeight));
        $prevBtn.add($nextBtn).css('top', ($modalOffsetTop + $modalHeight));
      };

      $modal.on($.modal.OPEN, function(e, modal){
        positionCalc(modal.$elm);
      });

      $(window).on('resize', function(){
        positionCalc($modal);
      });
    });
  </script>
</body>
</html>